{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/abhi/Documents/kmc/SIH/civic-cops-frontend/src/app/components/IssueCard.tsx"],"sourcesContent":["\"use client\"\n\nimport Image from \"next/image\"\n\ninterface IssueCardProps {\n  id: string\n  date: string\n  status: string\n  image: string\n  onClick?: () => void\n}\n\nexport function IssueCard({ id, date, status, image, onClick }: IssueCardProps) {\n  return (\n    <div \n      className=\"flex items-stretch bg-white rounded-xl px-0 py-0 shadow-md border border-gray-100 cursor-pointer hover:shadow-lg hover:bg-gray-50 transition-all duration-200\"\n      onClick={onClick}\n    >\n      <div className=\"flex-shrink-0\">\n        <Image\n          src={image}\n          alt=\"Issue\"\n          width={110}\n          height={110}\n          className=\"rounded-tl-xl rounded-bl-xl rounded-r-none object-cover bg-gray-200 border border-gray-300 h-full w-[110px]\"\n        />\n      </div>\n      <div className=\"text-base flex flex-col gap-1 justify-center ml-8\">\n        <div className=\"flex gap-2 items-center\">\n          <span className=\"font-semibold text-gray-800\">Issue ID:</span>\n          <span className=\"text-gray-500 font-medium\">{id}</span>\n        </div>\n        <div className=\"flex gap-2 items-center\">\n          <span className=\"font-semibold text-gray-800\">Date:</span>\n          <span className=\"text-gray-500 font-medium\">{date}</span>\n        </div>\n        <div className=\"flex gap-2 items-center\">\n          <span className=\"font-semibold text-blue-700\">Status:</span>\n          <span className=\"text-gray-500 font-medium\">{status}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYO,SAAS,UAAU,KAAoD;QAApD,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAkB,GAApD;IACxB,qBACE,0NAAC;QACC,WAAU;QACV,SAAS;;0BAET,0NAAC;gBAAI,WAAU;0BACb,cAAA,0NAAC,wKAAK;oBACJ,KAAK;oBACL,KAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,WAAU;;;;;;;;;;;0BAGd,0NAAC;gBAAI,WAAU;;kCACb,0NAAC;wBAAI,WAAU;;0CACb,0NAAC;gCAAK,WAAU;0CAA8B;;;;;;0CAC9C,0NAAC;gCAAK,WAAU;0CAA6B;;;;;;;;;;;;kCAE/C,0NAAC;wBAAI,WAAU;;0CACb,0NAAC;gCAAK,WAAU;0CAA8B;;;;;;0CAC9C,0NAAC;gCAAK,WAAU;0CAA6B;;;;;;;;;;;;kCAE/C,0NAAC;wBAAI,WAAU;;0CACb,0NAAC;gCAAK,WAAU;0CAA8B;;;;;;0CAC9C,0NAAC;gCAAK,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;;;;;;;AAKvD;KA/BgB","debugId":null}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///home/abhi/Documents/kmc/SIH/civic-cops-frontend/src/app/components/BottomNavBar.tsx"],"sourcesContent":["\"use client\"\n\nimport { Home, Camera, User, Search } from \"lucide-react\"\nimport Link from \"next/link\"\n\nexport function BottomNavbar() {\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around items-center h-16 shadow-lg\">\n      {/* Home */}\n      <Link href=\"/\" className=\"flex flex-col items-center text-gray-600\">\n        <Home size={24} />\n        <span className=\"text-xs\">Home</span>\n      </Link>\n\n      {/* Track Issues */}\n      <Link href=\"/track_issue\" className=\"flex flex-col items-center text-gray-600\">\n        <Search size={24} />\n        <span className=\"text-xs\">Track</span>\n      </Link>\n\n      {/* Report (big button) */}\n      <Link\n        href=\"/report\"\n        className=\"flex flex-col items-center -mt-8 bg-blue-500 rounded-full w-16 h-16 justify-center text-white shadow-lg\"\n      >\n        <Camera size={28} />\n      </Link>\n\n      {/* Profile */}\n      <Link href=\"/profile\" className=\"flex flex-col items-center text-gray-600\">\n        <User size={24} />\n        <span className=\"text-xs\">Profile</span>\n      </Link>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAKO,SAAS;IACd,qBACE,0NAAC;QAAI,WAAU;;0BAEb,0NAAC,uMAAI;gBAAC,MAAK;gBAAI,WAAU;;kCACvB,0NAAC,2OAAI;wBAAC,MAAM;;;;;;kCACZ,0NAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;0BAI5B,0NAAC,uMAAI;gBAAC,MAAK;gBAAe,WAAU;;kCAClC,0NAAC,gPAAM;wBAAC,MAAM;;;;;;kCACd,0NAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;0BAI5B,0NAAC,uMAAI;gBACH,MAAK;gBACL,WAAU;0BAEV,cAAA,0NAAC,gPAAM;oBAAC,MAAM;;;;;;;;;;;0BAIhB,0NAAC,uMAAI;gBAAC,MAAK;gBAAW,WAAU;;kCAC9B,0NAAC,0OAAI;wBAAC,MAAM;;;;;;kCACZ,0NAAC;wBAAK,WAAU;kCAAU;;;;;;;;;;;;;;;;;;AAIlC;KA9BgB","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///home/abhi/Documents/kmc/SIH/civic-cops-frontend/src/lib/api.ts"],"sourcesContent":["\"use client\"\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || \"https://civic-ops.onrender.com\";\n\nfunction getStoredToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  // Support both keys used elsewhere in the app\n  return localStorage.getItem(\"access_token\") || localStorage.getItem(\"token\");\n}\n\nexport async function apiFetch(path: string, options: RequestInit = {}) {\n  const url = `${API_BASE_URL}${path}`;\n  const token = getStoredToken();\n\n  const headers = new Headers(options.headers || {});\n  if (!headers.has(\"Content-Type\") && !(options.body instanceof FormData)) {\n    headers.set(\"Content-Type\", \"application/json\");\n  }\n  if (token) {\n    headers.set(\"Authorization\", `Bearer ${token}`);\n  }\n\n  const response = await fetch(url, { ...options, headers });\n  const contentType = response.headers.get(\"content-type\") || \"\";\n  const isJson = contentType.includes(\"application/json\");\n  const data = isJson ? await response.json() : await response.text();\n\n  if (!response.ok) {\n    const message = (isJson && (data?.detail || data?.message)) || response.statusText;\n    throw new Error(message || \"Request failed\");\n  }\n\n  return data;\n}\n\nexport type IssueResponse = {\n  issue_id: number;\n  title: string;\n  description: string;\n  category: string;\n  location?: string | null;\n  latitude?: number | null;\n  longitude?: number | null;\n  photo_url?: string | null;\n  voice_note_url?: string | null;\n  status: \"pending\" | \"in_progress\" | \"resolved\" | \"rejected\";\n  priority: \"unassigned\" | \"low\" | \"medium\" | \"high\" | \"urgent\";\n  created_at: string;\n  updated_at: string;\n};\n\nexport async function getIssueById(issueId: string | number): Promise<IssueResponse> {\n  return apiFetch(`/users/issues/${issueId}`, { method: \"GET\" });\n}\n\nexport interface UserStatsResponse {\n  total_issues: number\n  by_status: {\n    pending: number\n    in_progress: number\n    resolved: number\n    rejected: number\n  }\n}\n\nexport async function getUserStats(): Promise<UserStatsResponse> {\n  return apiFetch(\"/users/my-issues/stats\", { method: \"GET\" });\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAEqB;AAFrB;AAEA,MAAM,eAAe,wMAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAE7D,SAAS;IACP;;IACA,8CAA8C;IAC9C,OAAO,aAAa,OAAO,CAAC,mBAAmB,aAAa,OAAO,CAAC;AACtE;AAEO,eAAe,SAAS,IAAY;QAAE,UAAA,iEAAuB,CAAC;IACnE,MAAM,MAAM,AAAC,GAAiB,OAAf,cAAoB,OAAL;IAC9B,MAAM,QAAQ;IAEd,MAAM,UAAU,IAAI,QAAQ,QAAQ,OAAO,IAAI,CAAC;IAChD,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,CAAC,CAAC,QAAQ,IAAI,YAAY,QAAQ,GAAG;QACvE,QAAQ,GAAG,CAAC,gBAAgB;IAC9B;IACA,IAAI,OAAO;QACT,QAAQ,GAAG,CAAC,iBAAiB,AAAC,UAAe,OAAN;IACzC;IAEA,MAAM,WAAW,MAAM,MAAM,KAAK;QAAE,GAAG,OAAO;QAAE;IAAQ;IACxD,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;IAC5D,MAAM,SAAS,YAAY,QAAQ,CAAC;IACpC,MAAM,OAAO,SAAS,MAAM,SAAS,IAAI,KAAK,MAAM,SAAS,IAAI;IAEjE,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,UAAU,AAAC,UAAU,CAAC,CAAA,iBAAA,2BAAA,KAAM,MAAM,MAAI,iBAAA,2BAAA,KAAM,OAAO,CAAA,KAAM,SAAS,UAAU;QAClF,MAAM,IAAI,MAAM,WAAW;IAC7B;IAEA,OAAO;AACT;AAkBO,eAAe,aAAa,OAAwB;IACzD,OAAO,SAAS,AAAC,iBAAwB,OAAR,UAAW;QAAE,QAAQ;IAAM;AAC9D;AAYO,eAAe;IACpB,OAAO,SAAS,0BAA0B;QAAE,QAAQ;IAAM;AAC5D","debugId":null}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":["file:///home/abhi/Documents/kmc/SIH/civic-cops-frontend/src/app/home/page.tsx"],"sourcesContent":["\"use client\"\n\nimport React from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { IssueCard } from \"../components/IssueCard\"\nimport { BottomNavbar } from \"../components/BottomNavBar\"\nimport { AnalyticsSection } from \"../components/AnalyticsSection\"\nimport { apiFetch, type IssueResponse, type UserStatsResponse } from \"@/lib/api\"\n\nexport default function HomePage() {\n  const router = useRouter()\n  const [issues, setIssues] = React.useState<IssueResponse[]>([])\n  const [stats, setStats] = React.useState<UserStatsResponse | null>(null)\n  const [loading, setLoading] = React.useState(true)\n  const [statsLoading, setStatsLoading] = React.useState(true)\n  const [error, setError] = React.useState(\"\")\n\n  React.useEffect(() => {\n    const run = async () => {\n      const token = typeof window !== \"undefined\" ? (localStorage.getItem(\"access_token\") || localStorage.getItem(\"token\")) : null\n      if (!token) {\n        window.location.href = \"/login\"\n        return\n      }\n      try {\n        setLoading(true)\n        setStatsLoading(true)\n        setError(\"\")\n        \n        // Fetch issues and stats in parallel\n        const [issuesData, statsData] = await Promise.all([\n          apiFetch(\"/users/my-issues\", { method: \"GET\" }),\n          apiFetch(\"/users/my-issues/stats\", { method: \"GET\" })\n        ])\n        \n        setIssues(Array.isArray(issuesData) ? issuesData : [])\n        setStats(statsData)\n      } catch (e: any) {\n        setError(e?.message || \"Failed to load data\")\n      } finally {\n        setLoading(false)\n        setStatsLoading(false)\n      }\n    }\n    run()\n  }, [])\n\n  const formatDateTime = (iso: string) => {\n    try { return new Date(iso).toLocaleString() } catch { return iso }\n  }\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-white px-6 py-12 pb-24\">\n      <h1 className=\"text-2xl font-bold mb-2\">Your Complaints</h1>\n      <p className=\"text-sm text-gray-600 mb-6\">Real-time list of your submitted complaints</p>\n\n      {loading && <p className=\"text-gray-600\">Loading...</p>}\n      {!loading && error && <p className=\"text-red-600\">{error}</p>}\n\n      {!loading && !error && (\n        <div className=\"flex flex-col gap-4\">\n          {issues.length === 0 ? (\n            <div className=\"text-gray-600\">No complaints yet.</div>\n          ) : (\n            issues.map((issue) => (\n              <IssueCard\n                key={issue.issue_id}\n                id={String(issue.issue_id)}\n                date={formatDateTime(issue.created_at as unknown as string)}\n                status={issue.status === \"in_progress\" ? \"In Progress\" : issue.status.charAt(0).toUpperCase() + issue.status.slice(1)}\n                image={issue.photo_url || \"/placeholder.png\"}\n                onClick={() => router.push(`/track_issue?id=${issue.issue_id}`)}\n              />\n            ))\n          )}\n        </div>\n      )}\n\n      <BottomNavbar />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;;;AAPA;;;;;;AASe,SAAS;;IACtB,MAAM,SAAS,IAAA,+KAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,qMAAK,CAAC,QAAQ,CAAkB,EAAE;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,qMAAK,CAAC,QAAQ,CAA2B;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,qMAAK,CAAC,QAAQ,CAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,qMAAK,CAAC,QAAQ,CAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,qMAAK,CAAC,QAAQ,CAAC;IAEzC,qMAAK,CAAC,SAAS;8BAAC;YACd,MAAM;0CAAM;oBACV,MAAM,QAAQ,uCAAiC,aAAa,OAAO,CAAC,mBAAmB,aAAa,OAAO,CAAC,WAAY;oBACxH,IAAI,CAAC,OAAO;wBACV,OAAO,QAAQ,CAAC,IAAI,GAAG;wBACvB;oBACF;oBACA,IAAI;wBACF,WAAW;wBACX,gBAAgB;wBAChB,SAAS;wBAET,qCAAqC;wBACrC,MAAM,CAAC,YAAY,UAAU,GAAG,MAAM,QAAQ,GAAG,CAAC;4BAChD,IAAA,6JAAQ,EAAC,oBAAoB;gCAAE,QAAQ;4BAAM;4BAC7C,IAAA,6JAAQ,EAAC,0BAA0B;gCAAE,QAAQ;4BAAM;yBACpD;wBAED,UAAU,MAAM,OAAO,CAAC,cAAc,aAAa,EAAE;wBACrD,SAAS;oBACX,EAAE,OAAO,GAAQ;wBACf,SAAS,CAAA,cAAA,wBAAA,EAAG,OAAO,KAAI;oBACzB,SAAU;wBACR,WAAW;wBACX,gBAAgB;oBAClB;gBACF;;YACA;QACF;6BAAG,EAAE;IAEL,MAAM,iBAAiB,CAAC;QACtB,IAAI;YAAE,OAAO,IAAI,KAAK,KAAK,cAAc;QAAG,EAAE,UAAM;YAAE,OAAO;QAAI;IACnE;IAEA,qBACE,0NAAC;QAAI,WAAU;;0BACb,0NAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,0NAAC;gBAAE,WAAU;0BAA6B;;;;;;YAEzC,yBAAW,0NAAC;gBAAE,WAAU;0BAAgB;;;;;;YACxC,CAAC,WAAW,uBAAS,0NAAC;gBAAE,WAAU;0BAAgB;;;;;;YAElD,CAAC,WAAW,CAAC,uBACZ,0NAAC;gBAAI,WAAU;0BACZ,OAAO,MAAM,KAAK,kBACjB,0NAAC;oBAAI,WAAU;8BAAgB;;;;;2BAE/B,OAAO,GAAG,CAAC,CAAC,sBACV,0NAAC,mLAAS;wBAER,IAAI,OAAO,MAAM,QAAQ;wBACzB,MAAM,eAAe,MAAM,UAAU;wBACrC,QAAQ,MAAM,MAAM,KAAK,gBAAgB,gBAAgB,MAAM,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK,MAAM,MAAM,CAAC,KAAK,CAAC;wBACnH,OAAO,MAAM,SAAS,IAAI;wBAC1B,SAAS,IAAM,OAAO,IAAI,CAAC,AAAC,mBAAiC,OAAf,MAAM,QAAQ;uBALvD,MAAM,QAAQ;;;;;;;;;;0BAY7B,0NAAC,yLAAY;;;;;;;;;;;AAGnB;GAxEwB;;QACP,+KAAS;;;KADF","debugId":null}}]
}